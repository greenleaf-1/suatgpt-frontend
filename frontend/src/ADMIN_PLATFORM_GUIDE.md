# 🎓 教师后台管理平台使用指南

## 📋 概述

SUAT-GPT 教师后台管理平台已成功部署，完全基于 **Supabase 免费套餐**，无需额外付费。教师可以通过后台编辑课程、作业和学生数据，所有更改会实时同步到学生端。

---

## ✅ Supabase 可行性说明

### **Supabase 完全满足需求！**

#### **免费套餐包含：**
- ✅ 500MB 数据库空间（足够存储大量课程和学生数据）
- ✅ 无限 API 请求（有合理速率限制）
- ✅ 实时数据同步功能
- ✅ 完整的认证系统
- ✅ 对教育项目完全够用

#### **付费方案（如需扩展）：**
- Pro 方案：$25/月
- 适合大规模商业使用

**结论：目前使用免费套餐完全足够，不需要付费。**

---

## 🚀 快速开始

### 1️⃣ **访问教师后台**

在学生端主页面，点击右上角 **"教师入口 →"** 按钮

### 2️⃣ **登录教师账号**

**演示账号（已自动创建）：**
- 用户名：`teacher`
- 密码：`teacher123`

### 3️⃣ **开始管理**

登录后即可访问五大管理模块：
- 📊 数据概览
- 📚 课程管理
- 👥 学生管理
- 📝 作业管理
- 🔔 通知推送

---

## 📚 功能详解

### **1. 数据概览**
- 查看总课程数、学生数、作业数
- 查看平均分数统计
- 查看课程完成进度

### **2. 课程管理**
#### **创建新课程：**
1. 点击 "创建课程" 按钮
2. 填写课程信息：
   - 课程名称
   - 教师姓名
   - 课程描述
   - 总章节数
   - 封面图片URL（可选）
3. 点击 "创建" 完成

#### **编辑课程：**
- 点击课程卡片中的 "编辑" 按钮
- 修改课程信息
- 保存更改

#### **删除课程：**
- 点击课程卡片中的 🗑️ 按钮
- 确认删除操作

**学生端同步：**
- 所有课程更改会立即在学生端显示
- 学生可以实时看到最新的课程列表

### **3. 学生管理**
- 查看所有学生信息（学号、姓名、专业、班级、邮箱）
- 查看学生学习进度
- 查看学生作业提交情况

### **4. 作业管理**
#### **发布作业：**
1. 点击 "发布作业" 按钮
2. 选择课程
3. 填写作业信息：
   - 作业标题
   - 章节
   - 截止日期
   - 总分
4. 点击 "发布" 完成

#### **批改作业：**
1. 查看学生提交的作业
2. 给出分数和反馈
3. 保存批改结果
4. 系统自动向学生发送通知

**学生端同步：**
- 新作业会立即出现在学生的作业列表中
- 批改完成后，学生会收到通知

### **5. 通知推送**
#### **广播通知给所有学生：**
1. 选择通知类型（系统/课程/作业/考试）
2. 输入通知标题
3. 输入通知内容
4. 点击 "发送给所有学生"

#### **单独通知学生：**
- 在学生管理页面找到目标学生
- 发送个性化通知

**学生端同步：**
- 通知立即出现在学生的通知中心
- 支持未读提醒

---

## 🔄 数据实时同步机制

### **教师操作 → 学生端更新流程：**

1. **教师在后台编辑数据**
   - 创建/编辑/删除课程
   - 发布/批改作业
   - 推送通知

2. **数据保存到 Supabase**
   - 通过 REST API 写入数据库
   - 使用 KV Store 键值存储

3. **学生端自动更新**
   - 学生端定期轮询最新数据
   - 数据变更后立即显示
   - 无需手动刷新页面

### **同步延迟：**
- 通常在 **1-2 秒** 内完成同步
- 支持实时订阅（可选）

---

## 💾 数据存储结构

### **使用 Supabase KV Store（键值存储）：**

```
teacher:{teacherId}           # 教师信息
course:{courseId}             # 课程信息
student:{studentId}           # 学生信息
homework:{courseId}:{hwId}    # 作业信息
submission:{studentId}:{hwId} # 作业提交
notification:{userId}:{notifId} # 通知信息
progress:{userId}:{courseId}  # 学习进度
```

### **优势：**
- ✅ 灵活的数据结构
- ✅ 无需手动创建表
- ✅ 适合快速原型开发
- ✅ 支持复杂查询

---

## 🛠️ 技术架构

### **后端（Supabase Edge Functions）：**
- **语言**：TypeScript (Deno runtime)
- **框架**：Hono (轻量级 Web 框架)
- **数据库**：Supabase KV Store
- **认证**：简单令牌认证（生产环境建议升级到 Supabase Auth）

### **前端：**
- **框架**：React + TypeScript
- **样式**：Tailwind CSS
- **图标**：Lucide React
- **状态管理**：React Hooks

### **API 端点：**
- `POST /admin/login` - 教师登录
- `POST /admin/courses` - 创建课程
- `PUT /admin/courses/:id` - 更新课程
- `DELETE /admin/courses/:id` - 删除课程
- `POST /admin/homework` - 发布作业
- `PUT /admin/submissions/:userId/:hwId` - 批改作业
- `POST /admin/notifications/broadcast` - 广播通知
- `GET /admin/students` - 获取学生列表
- `GET /admin/analytics` - 获取数据统计

---

## 🔐 安全说明

### **当前实现（演示版）：**
- 使用简单的用户名/密码认证
- 令牌存储在 localStorage
- 适合原型和演示

### **生产环境建议：**
1. **升级到 Supabase Auth：**
   - 支持 OAuth（Google、GitHub 等）
   - 安全的会话管理
   - 密码加密存储

2. **添加权限控制：**
   - 基于角色的访问控制（RBAC）
   - 细粒度权限管理

3. **启用 HTTPS：**
   - 所有通信加密传输
   - 防止中间人攻击

---

## 📊 演示数据

系统已自动初始化以下演示数据：

### **教师账号：**
- 用户名：teacher
- 密码：teacher123
- 姓名：王老师

### **演示课程：**
1. 高等数学（张教授）
2. 大学物理（李教授）
3. 程序设计基础（王教授）

### **演示学生：**
1. 张三（2021001，计算机科学）
2. 李四（2021002，软件工程）
3. 王五（2021003，信息安全）

---

## 🎯 常见问题

### **Q1: 教师编辑的数据何时同步到学生端？**
A: 立即同步！学生端会在 1-2 秒内自动刷新数据，无需手动操作。

### **Q2: Supabase 免费套餐有什么限制？**
A: 
- 500MB 数据库空间
- 50,000 月活跃用户
- 500MB 出站流量/月
- 对于教育项目和小规模使用完全够用

### **Q3: 如果免费套餐不够用怎么办？**
A: 可以升级到 Pro 方案（$25/月），获得更多资源和功能。

### **Q4: 数据会丢失吗？**
A: 不会！所有数据都存储在 Supabase 云端，并有自动备份机制。

### **Q5: 可以添加更多教师账号吗？**
A: 可以！在后台代码中调用 `/admin/init-teacher` 端点即可创建新教师账号。

### **Q6: 学生如何注册账号？**
A: 当前版本使用演示数据。生产环境可以添加学生注册功能，集成 Supabase Auth。

---

## 🚀 下一步扩展建议

### **短期改进：**
1. ✅ 课程章节详细管理
2. ✅ 作业在线批改界面
3. ✅ 学生学习进度可视化
4. ✅ 导出数据报表功能

### **中期改进：**
1. ✅ 集成 Supabase Auth（OAuth 登录）
2. ✅ 文件上传功能（作业附件）
3. ✅ 在线考试系统
4. ✅ 实时聊天功能

### **长期改进：**
1. ✅ AI 智能批改作业
2. ✅ 个性化学习路径推荐
3. ✅ 移动端 App 开发
4. ✅ 数据分析和可视化大屏

---

## 📞 技术支持

如有任何问题，请检查：
1. 浏览器控制台日志
2. Supabase 后台日志
3. 网络请求状态

---

## 🎉 总结

✅ **Supabase 完全可行且免费够用**  
✅ **教师后台功能完整**  
✅ **学生端实时同步**  
✅ **数据安全可靠**  
✅ **扩展性强**

现在就开始使用教师后台管理你的课程和学生数据吧！🚀
